---
- name: Apt install gnome-shell-extension-ubuntu-dock
  ansible.builtin.apt:
    pkg:
      - gnome-shell-extension-ubuntu-dock
  become: true

- name: Query Gnome extension ubuntu-dock
  ansible.builtin.command:
    cmd: gnome-extensions info ubuntu-dock@ubuntu.com
  changed_when: false
  register: ubuntu_dock

- name: Gnome enable extension ubuntu-dock
  ansible.builtin.command:
    cmd: gnome-extensions enable ubuntu-dock@ubuntu.com
  when: ubuntu_dock.stdout is not search('(?i)state\s*:\s*enabled')
